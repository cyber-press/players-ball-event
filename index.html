<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DATASTREAM // VENUE: Horizon & More</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glow-cyan: rgba(0, 255, 255, 0.8);
            --glow-magenta: rgba(255, 0, 255, 0.8);
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #02001a;
            color: #E0E0E0;
            overflow-x: hidden;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #02001a; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 255, 255, 0.2); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0, 255, 255, 0.4); }

        #grid-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-image:
                linear-gradient(rgba(2, 0, 26, 0.97), rgba(2, 0, 26, 0.97)),
                linear-gradient(to right, rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: pan-grid 60s linear infinite;
            z-index: -1;
        }
        @keyframes pan-grid {
            0% { background-position: 0 0; }
            100% { background-position: 1200px 1200px; }
        }

        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .header-bg { 
            background-color: rgba(2, 0, 26, 0.8);
            backdrop-filter: blur(10px);
        }
        .glass-panel { 
            background-color: rgba(10, 25, 47, 0.3);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        .text-glow-cyan { text-shadow: 0 0 8px var(--glow-cyan); }
        .text-glow-magenta { text-shadow: 0 0 8px var(--glow-magenta); }

        .btn-primary {
            background-color: transparent;
            color: var(--glow-cyan);
            font-weight: 700;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            border: 2px solid var(--glow-cyan);
            transition: all 0.3s ease;
            box-shadow: 0 0 10px var(--glow-cyan), inset 0 0 10px var(--glow-cyan);
        }
        .btn-primary:hover {
            background-color: var(--glow-cyan);
            color: #02001a;
            box-shadow: 0 0 25px var(--glow-cyan), inset 0 0 5px var(--glow-cyan);
            transform: translateY(-2px);
        }
        .dark-map {
            filter: invert(1) hue-rotate(180deg) contrast(0.9);
        }

        .event-card {
            border-left: 2px solid transparent;
            border-right: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .event-card:hover {
            border-left-color: var(--glow-magenta);
            border-right-color: var(--glow-magenta);
            background-color: rgba(255, 0, 255, 0.05);
        }
        
        /* Glitch Effect */
        .glitch { animation: glitch 2.5s infinite steps(1); }
        @keyframes glitch {
            0%, 100% { clip-path: inset(0 0 0 0); }
            5%, 8% { clip-path: inset(25% 0 75% 0); transform: translate(-5px, 0); }
            9%, 12% { clip-path: inset(50% 0 10% 0); transform: translate(5px, 0); }
            13%, 16% { clip-path: inset(80% 0 5% 0); transform: translate(-3px, 2px); }
            17% { clip-path: inset(0 0 0 0); transform: translate(0, 0); }
            90% { clip-path: inset(0 0 0 0); }
            92% { clip-path: inset(90% 0 5% 0); }
            95% { clip-path: inset(20% 0 40% 0); }
            98% { clip-path: inset(70% 0 10% 0); }
        }

        /* Scroll Animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed; inset: 0; background-color: rgba(2, 0, 26, 0.8);
            backdrop-filter: blur(5px); z-index: 100;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-content {
             transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content { transform: scale(1); }
    </style>
</head>
<body class="w-full">
    <div id="grid-background"></div>

    <!-- Header -->
    <header class="header-bg border-b border-cyan-500/20 shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-orbitron font-bold text-glow-cyan">THE DUNGEON</div>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#events" class="text-gray-300 hover:text-glow-cyan transition smooth-scroll">EVENTS</a>
                <a href="#location" class="text-gray-300 hover:text-glow-cyan transition smooth-scroll">LOCATION</a>
                <a href="#about" class="text-gray-300 hover:text-glow-cyan transition smooth-scroll">ABOUT</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-300">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </button>
        </nav>
        <!-- Mobile menu -->
        <div class="hidden md:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#events" class="text-gray-300 hover:bg-cyan-900/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">EVENTS</a>
                <a href="#location" class="text-gray-300 hover:bg-cyan-900/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">LOCATION</a>
                <a href="#about" class="text-gray-300 hover:bg-cyan-900/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">ABOUT</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-6 py-12">
        <div class="flex flex-col lg:flex-row gap-10">

            <!-- Left Column: Main Info -->
            <main class="w-full lg:w-2/3">
                <!-- Venue Header -->
                <div class="mb-8 fade-in-section">
                    <h1 class="relative font-orbitron text-5xl md:text-6xl font-extrabold text-white text-glow-cyan glitch">Horizon & More</h1>
                    <p class="text-lg text-cyan-200/50 mt-2">// 2818 NE Interstate 410 Loop, San Antonio, TX 78217</p>
                </div>
                
                <!-- Hero Image -->
                <div class="fade-in-section relative rounded-lg shadow-xl mb-8 overflow-hidden border-2 border-magenta-500/30">
                     <img src="https://placehold.co/800x400/02001a/ff00ff?text=Player's+Ball" alt="Player's Ball Event Image" class="w-full h-auto object-cover">
                     <div class="absolute inset-0 bg-black/30"></div>
                </div>

                <!-- Upcoming Events Section -->
                <div id="events" class="fade-in-section glass-panel rounded-lg shadow-xl p-8">
                    <h2 class="font-orbitron text-3xl font-bold text-white border-b border-cyan-500/20 pb-4 mb-6 text-glow-cyan">Upcoming Transmissions</h2>
                    
                    <div class="space-y-8">
                        <!-- Event Card: Player's Ball -->
                        <div class="event-card p-4 -m-4 rounded-lg">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="w-full">
                                    <h3 class="font-bold text-3xl text-white text-glow-magenta">Player's Ball</h3>
                                    <p class="text-magenta-300/70 mb-4">Transmission Source: The Dungeon</p>
                                    
                                    <!-- Countdown Timer -->
                                    <div id="countdown" class="grid grid-cols-4 gap-4 text-center my-6">
                                        <div class="glass-panel py-2 rounded"><p id="days" class="font-orbitron text-4xl text-glow-cyan">00</p><span class="text-xs text-cyan-300/50">DAYS</span></div>
                                        <div class="glass-panel py-2 rounded"><p id="hours" class="font-orbitron text-4xl text-glow-cyan">00</p><span class="text-xs text-cyan-300/50">HOURS</span></div>
                                        <div class="glass-panel py-2 rounded"><p id="minutes" class="font-orbitron text-4xl text-glow-cyan">00</p><span class="text-xs text-cyan-300/50">MINUTES</span></div>
                                        <div class="glass-panel py-2 rounded"><p id="seconds" class="font-orbitron text-4xl text-glow-cyan">00</p><span class="text-xs text-cyan-300/50">SECONDS</span></div>
                                    </div>
                                    <div id="live-status" class="hidden text-center my-6">
                                        <p class="font-orbitron text-4xl text-glow-magenta animate-pulse">TRANSMISSION LIVE</p>
                                    </div>

                                    <p class="mb-4">An evening dedicated to style, games, and high-class leisure.</p>
                                    <div class="flex items-center text-sm space-x-4 mb-4">
                                        <span><span class="font-bold">//</span> 8:00 PM - 2:00 AM</span>
                                        <span class="text-cyan-800">&bull;</span>
                                        <span class="font-bold text-glow-magenta">ACCESS: COMPLIMENTARY</span>
                                    </div>
                                    <div class="relative inline-block mt-4">
                                        <button id="calendar-button-toggle" class="btn-primary inline-flex items-center gap-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /></svg>
                                            <span id="calendar-button-text">Add to Calendar</span>
                                        </button>
                                        <div id="calendar-dropdown" class="hidden absolute bottom-full mb-2 w-full glass-panel rounded-lg shadow-xl overflow-hidden z-10">
                                            <ul class="text-center">
                                                <li><a href="#" id="google-cal-link" target="_blank" class="block w-full px-4 py-3 text-sm text-gray-300 hover:bg-cyan-900/50 transition duration-150 ease-in-out">Google Calendar</a></li>
                                                <li><a href="#" id="outlook-cal-link" target="_blank" class="block w-full px-4 py-3 text-sm text-gray-300 hover:bg-cyan-900/50 transition duration-150 ease-in-out">Outlook</a></li>
                                                <li><a href="#" id="ics-cal-link" class="block w-full px-4 py-3 text-sm text-gray-300 hover:bg-cyan-900/50 transition duration-150 ease-in-out">Apple / .ics</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <hr class="border-cyan-500/10 my-8">
                                    
                                    <!-- Event Intel Section -->
                                    <h3 class="font-orbitron text-xl font-bold text-white mb-4 text-glow-cyan">// Event Intel</h3>
                                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                        <button class="intel-button glass-panel p-4 rounded-lg text-center hover:border-magenta-500/50" data-modal="prize-modal">🏆<span class="block text-sm mt-2">Prize Protocol</span></button>
                                        <button class="intel-button glass-panel p-4 rounded-lg text-center hover:border-magenta-500/50" data-modal="games-modal">🎲<span class="block text-sm mt-2">Game Matrix</span></button>
                                        <button class="intel-button glass-panel p-4 rounded-lg text-center hover:border-magenta-500/50" data-modal="lounge-modal">💨<span class="block text-sm mt-2">Lounge Access</span></button>
                                    </div>

                                </div>
                            </div>
                        </div>
                        
                        <!-- Divider -->
                        <hr class="border-cyan-500/10">

                        <!-- Enhanced Future Event Placeholder -->
                         <div class="p-4 -m-4 rounded-lg opacity-60">
                            <div class="relative border-2 border-cyan-500/20 p-6 rounded-lg">
                                <!-- Corner brackets for style -->
                                <div class="absolute top-1 left-1 w-4 h-4 border-t-2 border-l-2 border-cyan-500/50"></div>
                                <div class="absolute top-1 right-1 w-4 h-4 border-t-2 border-r-2 border-cyan-500/50"></div>
                                <div class="absolute bottom-1 left-1 w-4 h-4 border-b-2 border-l-2 border-cyan-500/50"></div>
                                <div class="absolute bottom-1 right-1 w-4 h-4 border-b-2 border-r-2 border-cyan-500/50"></div>
                                
                                <div class="flex flex-col md:flex-row items-center gap-6">
                                    <div class="text-cyan-500/50">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                                    </div>
                                    <div class="w-full">
                                        <h3 class="font-bold text-3xl text-white">Project: Chimera</h3>
                                        <p class="text-gray-500 mb-4">Transmission Source: [REDACTED]</p>
                                        <p class="text-cyan-300 font-mono text-sm h-10 data-scramble">[STATUS: ENCRYPTED]...</p>
                                        <p class="font-orbitron text-2xl text-cyan-300/50 mt-4">DATE: OCTOBER 2025</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Section -->
                <div id="about" class="fade-in-section glass-panel rounded-lg shadow-xl p-8 mt-8">
                     <h2 class="font-orbitron text-3xl font-bold text-white border-b border-cyan-500/20 pb-4 mb-6 text-glow-cyan">Venue Datapack</h2>
                     <p class="text-gray-300 leading-relaxed">Horizon & More is a versatile event space located conveniently in San Antonio, perfect for hosting exclusive and private gatherings. Featuring a spacious indoor setting, an outdoor patio, full bar service, and ample parking, it's the ideal location for your next premier event.</p>
                </div>

                <!-- Map Section -->
                <div id="location" class="fade-in-section glass-panel rounded-lg shadow-xl mt-8 overflow-hidden">
                     <h2 class="font-orbitron text-3xl font-bold text-white p-8 pb-4 text-glow-cyan">Navigation Matrix</h2>
                     <div class="p-8 pt-0">
                        <div class="rounded-lg overflow-hidden border-2 border-cyan-500/30 h-96">
                            <iframe class="dark-map w-full h-full"
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3472.775815324545!2d-98.42050402465719!3d29.492211442118324!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x865c6062f4434255%3A0x6731a542159cf058!2s2818%20NE%20Interstate%20410%20Loop%2C%20San%20Antonio%2C%20TX%2078217!5e0!3m2!1sen!2sus!4v1725333105745!5m2!1sen!2sus"
                                style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                     </div>
                </div>
            </main>

            <!-- Right Column: Sidebar -->
            <aside class="w-full lg:w-1/3 fade-in-section">
                <div class="glass-panel rounded-lg shadow-xl p-6 sticky top-28">
                     <button id="rsvp-button" class="btn-primary w-full mb-6">
                        RSVP / Confirm Signal
                     </button>

                     <h2 class="font-orbitron text-xl font-bold text-white pb-4 text-glow-cyan">System Status</h2>
                     <div class="space-y-3 text-sm font-mono text-cyan-300">
                        <div class="flex justify-between items-center"><span>Network</span><span class="text-green-400">Online</span></div>
                        <div class="flex justify-between items-center"><span>Datastream</span><span class="text-green-400">Stable</span></div>
                        <div class="flex justify-between items-center"><span>Confirmed Signals</span><span id="guest-count" class="text-green-400">137</span></div>
                     </div>
                     
                     <hr class="border-cyan-500/20 my-6">

                     <h2 class="font-orbitron text-xl font-bold text-white pb-4 text-glow-cyan">Social Network</h2>
                     <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-glow-cyan transition duration-300 hover:drop-shadow-[0_0_5px_var(--glow-cyan)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.28C8.28,9.09 5.11,7.38 2.9,4.79C2.53,5.42 2.33,6.15 2.33,6.94C2.33,8.43 3.11,9.75 4.26,10.54C3.54,10.52 2.87,10.31 2.29,10.03V10.08C2.29,12.09 3.71,13.78 5.6,14.17C5.25,14.26 4.87,14.31 4.49,14.31C4.21,14.31 3.94,14.28 3.68,14.23C4.22,15.89 5.82,17.06 7.69,17.1C6.27,18.23 4.4,18.87 2.38,18.87C2.03,18.87 1.69,18.85 1.36,18.81C3.25,20.04 5.5,20.8 8,20.8C16,20.8 20.25,14.18 20.25,8.78C20.25,8.58 20.25,8.39 20.24,8.19C21.1,7.57 21.86,6.84 22.46,6Z"></path></svg></a>
                        <a href="#" class="text-gray-400 hover:text-glow-cyan transition duration-300 hover:drop-shadow-[0_0_5px_var(--glow-cyan)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></svg></a>
                        <a href="#" class="text-gray-400 hover:text-glow-cyan transition duration-300 hover:drop-shadow-[0_0_5px_var(--glow-cyan)]"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"></path></svg></a>
                     </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Modals -->
    <!-- RSVP Modal -->
    <div id="rsvp-modal" class="modal-overlay">
        <div class="modal-content glass-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4">
            <h2 class="font-orbitron text-2xl text-white text-glow-cyan mb-4">Confirm Signal</h2>
            <p class="text-gray-400 mb-6">Register your alias to confirm your attendance at the Player's Ball.</p>
            <form id="rsvp-form">
                <input type="text" id="alias-input" placeholder="Enter Alias..." class="w-full bg-cyan-900/20 border border-cyan-500/30 rounded-md px-4 py-2 text-white placeholder-gray-500 focus:ring-2 focus:ring-cyan-400 focus:outline-none">
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" class="close-modal-button text-gray-400 hover:text-white">Cancel</button>
                    <button type="submit" class="btn-primary">Confirm</button>
                </div>
            </form>
            <div id="rsvp-success" class="hidden text-center">
                <h3 class="font-orbitron text-2xl text-green-400">Signal Confirmed!</h3>
                <p class="text-gray-400 mt-2">Your attendance has been logged. We'll see you there.</p>
                <button type="button" class="close-modal-button mt-6 btn-primary">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Intel Modals -->
    <div id="prize-modal" class="modal-overlay">
         <div class="modal-content glass-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-orbitron text-2xl text-white text-glow-magenta mb-4">Prize Protocol</h2>
            <p class="text-gray-300">Showcase your finest attire. A grand prize and eternal bragging rights await the most stylish player of the evening. The winner will be judged by a panel of anonymous connoisseurs.</p>
            <button class="close-modal-button mt-6 btn-primary">Close</button>
        </div>
    </div>
    <div id="games-modal" class="modal-overlay">
         <div class="modal-content glass-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-orbitron text-2xl text-white text-glow-magenta mb-4">Game Matrix</h2>
            <p class="text-gray-300">Engage in high-stakes, high-reward transmissions. Join the lively game of "Bih Better Have My Money," or test your strategy in classic games of Spades & Dominoes. Only the sharpest minds will prevail.</p>
            <button class="close-modal-button mt-6 btn-primary">Close</button>
        </div>
    </div>
     <div id="lounge-modal" class="modal-overlay">
         <div class="modal-content glass-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-orbitron text-2xl text-white text-glow-magenta mb-4">Lounge Access</h2>
            <p class="text-gray-300">Retreat to the designated patio sector. Enjoy a selection of fine cigars and network with fellow players in a relaxed, sophisticated atmosphere away from the main floor.</p>
            <button class="close-modal-button mt-6 btn-primary">Close</button>
        </div>
    </div>


    <!-- Footer -->
    <footer class="header-bg border-t border-cyan-500/20 mt-12">
        <div class="container mx-auto px-6 py-4 text-center text-cyan-200/50 text-sm flex justify-between items-center">
            <p>&copy; 2025 The Dungeon Presents. All Rights Reserved.</p>
            <button id="mute-button" class="text-cyan-200/50 hover:text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5.5 3.5A1.5 1.5 0 017 5v1.586l-1.5-1.5V5a.5.5 0 011 0v.586l-2-2V5a1.5 1.5 0 011.5-1.5zM12.5 5A1.5 1.5 0 0114 6.5v4.086l-1-1V6.5a.5.5 0 011 0v3.086l-1-1V6.5a.5.5 0 011 0v.086l-1-1V6.5a.5.5 0 01.5-.5H13a.5.5 0 010 1h-.5v.086l-1-1V6.5a.5.5 0 01.5-.5H13a.5.5 0 010 1h-.5v1.086l-1-1V6.5a.5.5 0 01.5-.5h.5a.5.5 0 010 1h-.5v1.086l-1-1V6.5a.5.5 0 01.5-.5H13a.5.5 0 010 1h-.5v.086l-1-1V6.5A.5.5 0 0112 6v-.5a.5.5 0 01.5-.5z" /><path fill-rule="evenodd" d="M2.293 2.293a1 1 0 011.414 0l14 14a1 1 0 01-1.414 1.414l-14-14a1 1 0 010-1.414zM4 10.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0v-3a.5.5 0 01.5-.5zm2.5-.5a.5.5 0 00-1 0v3a.5.5 0 001 0v-3zM8 10.5a.5.5 0 01.5.5v3a.5.5 0 01-1 0v-3A.5.5 0 018 10.5zm2.5-.5a.5.5 0 00-1 0v3a.5.5 0 001 0v-3z" clip-rule="evenodd" /></svg>
            </button>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
             // --- Audio Setup ---
            let audioMuted = false;
            let audioStarted = false;
            const synth = new Tone.Synth({ oscillator: { type: "sine" }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 } }).toDestination();

            const startAudioContext = async () => {
                if (audioStarted) return;
                await Tone.start();
                audioStarted = true;
                console.log('Audio context started');
                window.removeEventListener('click', startAudioContext);
                window.removeEventListener('keydown', startAudioContext);
            };
            window.addEventListener('click', startAudioContext, { once: true });
            window.addEventListener('keydown', startAudioContext, { once: true });

            const playSound = (note, duration) => { if (!audioMuted && audioStarted) synth.triggerAttackRelease(note, duration); };
            
            let hoverSoundTimeout;
            document.querySelectorAll('a, button, .smooth-scroll, .intel-button').forEach(el => {
                 el.addEventListener('mouseenter', () => {
                    clearTimeout(hoverSoundTimeout);
                    hoverSoundTimeout = setTimeout(() => playSound('C4', '8n'), 50);
                });
                el.addEventListener('click', () => playSound('G4', '8n'));
            });
            
            const muteButton = document.getElementById('mute-button');
            if(muteButton) {
                muteButton.addEventListener('click', () => {
                    audioMuted = !audioMuted;
                    muteButton.classList.toggle('text-glow-magenta', audioMuted);
                });
            }

            // Smooth Scroll Logic
            document.querySelectorAll('a.smooth-scroll').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (mobileMenu) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // Countdown Timer Logic
            const countdownElement = document.getElementById('countdown');
            const liveStatusElement = document.getElementById('live-status');
            const eventDate = new Date('September 13, 2025 20:00:00').getTime();

            const countdownInterval = setInterval(() => {
                const now = new Date().getTime();
                const timeLeft = eventDate - now;

                if (timeLeft < 0) {
                    clearInterval(countdownInterval);
                    if (countdownElement) countdownElement.classList.add('hidden');
                    if (liveStatusElement) liveStatusElement.classList.remove('hidden');
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = String(days).padStart(2, '0');
                document.getElementById('hours').innerText = String(hours).padStart(2, '0');
                document.getElementById('minutes').innerText = String(minutes).padStart(2, '0');
                document.getElementById('seconds').innerText = String(seconds).padStart(2, '0');
            }, 1000);
            
            // Add to Calendar Logic
            const calendarToggle = document.getElementById('calendar-button-toggle');
            const calendarDropdown = document.getElementById('calendar-dropdown');
            const calendarButtonText = document.getElementById('calendar-button-text');

            const eventDetails = {
                title: "Player’s Ball",
                location: "Horizons & More - 2818 NE Interstate 410 Loop, San Antonio, TX 78217",
                description: "The Dungeon Presents: Player’s Ball. An evening dedicated to style, games, and high-class leisure.",
                startTimeUTC: "20250914T010000Z",
                endTimeUTC: "20250914T070000Z"
            };

            const googleLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventDetails.title)}&dates=${eventDetails.startTimeUTC}/${eventDetails.endTimeUTC}&details=${encodeURIComponent(eventDetails.description)}&location=${encodeURIComponent(eventDetails.location)}`;
            document.getElementById('google-cal-link').href = googleLink;

            const outlookLink = `https://outlook.live.com/calendar/0/deeplink/compose?path=/calendar/action/compose&rru=addevent&subject=${encodeURIComponent(eventDetails.title)}&startdt=${eventDetails.startTimeUTC}&enddt=${eventDetails.endTimeUTC}&body=${encodeURIComponent(eventDetails.description)}&location=${encodeURIComponent(eventDetails.location)}`;
            document.getElementById('outlook-cal-link').href = outlookLink;
            
            document.getElementById('ics-cal-link').addEventListener('click', (e) => {
                e.preventDefault();
                const icsContent = ["BEGIN:VCALENDAR", "VERSION:2.0", "BEGIN:VEVENT", `URL:${document.URL}`, `DTSTART:${eventDetails.startTimeUTC}`, `DTEND:${eventDetails.endTimeUTC}`, `SUMMARY:${eventDetails.title}`, `DESCRIPTION:${eventDetails.description}`, `LOCATION:${eventDetails.location}`, "END:VEVENT", "END:VCALENDAR"].join("\n");
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'players-ball-event.ics';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            if(calendarToggle && calendarDropdown){
                calendarToggle.addEventListener('click', (e) => { e.stopPropagation(); calendarDropdown.classList.toggle('hidden'); });
            }
            
            document.querySelectorAll('#calendar-dropdown a').forEach(link => {
                link.addEventListener('click', () => {
                    calendarDropdown.classList.add('hidden');
                    calendarButtonText.innerText = "Success!";
                    calendarToggle.style.borderColor = 'var(--glow-magenta)';
                    calendarToggle.style.color = 'var(--glow-magenta)';
                    setTimeout(() => {
                        calendarButtonText.innerText = "Add to Calendar";
                        calendarToggle.style.borderColor = 'var(--glow-cyan)';
                        calendarToggle.style.color = 'var(--glow-cyan)';
                    }, 2500);
                });
            });

            window.addEventListener('click', (e) => {
                if(calendarDropdown && !calendarDropdown.classList.contains('hidden') && !calendarToggle.contains(e.target)){
                    calendarDropdown.classList.add('hidden');
                }
            });

            // Scroll Animation Logic
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('is-visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-section').forEach(section => observer.observe(section));

            // Text Scramble Effect
            class TextScramble {
                constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#_'; this.update = this.update.bind(this); }
                setText(newText) {
                    const oldText = this.el.innerText; const length = Math.max(oldText.length, newText.length);
                    const promise = new Promise((resolve) => this.resolve = resolve); this.queue = [];
                    for (let i = 0; i < length; i++) {
                        const from = oldText[i] || ''; const to = newText[i] || '';
                        const start = Math.floor(Math.random() * 40); const end = start + Math.floor(Math.random() * 40);
                        this.queue.push({ from, to, start, end });
                    }
                    cancelAnimationFrame(this.frameRequest); this.frame = 0; this.update(); return promise;
                }
                update() {
                    let output = ''; let complete = 0;
                    for (let i = 0, n = this.queue.length; i < n; i++) {
                        let { from, to, start, end, char } = this.queue[i];
                        if (this.frame >= end) { complete++; output += to; } 
                        else if (this.frame >= start) {
                            if (!char || Math.random() < 0.28) { char = this.randomChar(); this.queue[i].char = char; }
                            output += `<span class="opacity-50">${char}</span>`;
                        } else { output += from; }
                    }
                    this.el.innerHTML = output;
                    if (complete === this.queue.length) { this.resolve(); } 
                    else { this.frameRequest = requestAnimationFrame(this.update); this.frame++; }
                }
                randomChar() { return this.chars[Math.floor(Math.random() * this.chars.length)]; }
            }
            const scrambleElements = document.querySelectorAll('.data-scramble');
            scrambleElements.forEach(el => {
                const fx = new TextScramble(el);
                const phrases = ['[STATUS: ENCRYPTED]', '// ACCESS DENIED //', '[REDACTING DATA...]', 'AWAITING KEY...'];
                let counter = 0;
                const next = () => {
                    fx.setText(phrases[counter]).then(() => setTimeout(next, 2000 + Math.random() * 3000));
                    counter = (counter + 1) % phrases.length;
                };
                next();
            });

            // Modal Logic
            const rsvpButton = document.getElementById('rsvp-button');
            const rsvpModal = document.getElementById('rsvp-modal');
            const rsvpForm = document.getElementById('rsvp-form');
            const rsvpSuccess = document.getElementById('rsvp-success');
            const guestCountEl = document.getElementById('guest-count');
            let guestCount = 137;

            const openModal = (modal) => modal.classList.add('active');
            const closeModal = (modal) => modal.classList.remove('active');

            rsvpButton.addEventListener('click', () => openModal(rsvpModal));
            
            rsvpForm.addEventListener('submit', (e) => {
                e.preventDefault();
                rsvpForm.classList.add('hidden');
                rsvpSuccess.classList.remove('hidden');
                guestCount++;
                guestCountEl.textContent = guestCount;
            });
            
            document.querySelectorAll('.close-modal-button').forEach(btn => {
                btn.addEventListener('click', () => {
                    closeModal(btn.closest('.modal-overlay'));
                    // Reset RSVP form
                    setTimeout(() => {
                        rsvpForm.classList.remove('hidden');
                        rsvpSuccess.classList.add('hidden');
                        document.getElementById('alias-input').value = '';
                    }, 300);
                });
            });

            document.querySelectorAll('.intel-button').forEach(btn => {
                btn.addEventListener('click', () => {
                    const modalId = btn.dataset.modal;
                    const modal = document.getElementById(modalId);
                    if(modal) openModal(modal);
                });
            });

            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                     if(e.target === modal) closeModal(modal);
                });
            });
        });
    </script>
</body>
</html>

