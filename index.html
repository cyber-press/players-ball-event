<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Player's Ball - A Soul Train Vibe!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fascinate+Inline&family=Righteous&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Google Analytics 4 (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX'); // Replace G-XXXXXXXXXX with your Measurement ID
    </script>
    <style>
        :root {
            --yellow: #facc15;
            --orange: #f97316;
            --purple: #3730a3;
            --brown: #291d19;
            --cream: #fef3c7;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--brown);
            color: var(--cream);
            overflow-x: hidden;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--brown); }
        ::-webkit-scrollbar-thumb { background: var(--orange); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--yellow); }

        #luxury-animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--brown);
            z-index: -1;
            overflow: hidden;
        }
        .light {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: fadeIn 5s infinite alternate;
            will-change: transform;
            transition: transform 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 0.2; }
        }

        .font-fascinate { font-family: 'Fascinate Inline', cursive; }
        .font-righteous { font-family: 'Righteous', cursive; }
        .header-bg { 
            background-color: rgba(20, 8, 5, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 3px solid var(--orange);
        }
        .funky-panel { 
            background-color: rgba(67, 20, 5, 0.5);
            border: 3px solid var(--orange);
            border-radius: 20px;
            box-shadow: 0 0 25px rgba(249, 115, 22, 0.2);
        }
        
        .yellow-text { color: var(--yellow); }
        .orange-text { color: var(--orange); }

        .btn-primary {
            background-color: var(--orange);
            color: var(--brown);
            font-family: 'Righteous', cursive;
            font-size: 1.125rem;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            border: 2px solid #000;
            transition: all 0.3s ease;
            text-transform: uppercase;
            box-shadow: 4px 4px 0px #000;
        }
        .btn-primary:hover {
            background-color: var(--yellow);
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }

        .rainbow-title {
            background: linear-gradient(90deg, #ef4444, #f97316, #eab308, #84cc16, #22d3ee, #a855f7, #ef4444);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbow-flow 8s linear infinite;
        }
        @keyframes rainbow-flow {
            to { background-position: 200% center; }
        }

        /* Scroll Animations */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed; inset: 0; background-color: rgba(41, 29, 25, 0.8);
            backdrop-filter: blur(5px); z-index: 100;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-content {
             transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content { transform: scale(1); }
        
        /* Marquee Styles */
        .marquee {
            white-space: nowrap;
            overflow: hidden;
            position: relative;
            background-color: var(--purple);
            padding: 0.5rem 0;
            border-top: 3px solid var(--yellow);
            border-bottom: 3px solid var(--yellow);
        }
        .marquee-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 30s linear infinite;
        }
        .marquee-content span {
            margin: 0 2rem;
            font-family: 'Righteous', cursive;
            font-size: 1.25rem;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="w-full">
    <div id="luxury-animated-background"></div>

    <!-- Header -->
    <header class="header-bg sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-3xl font-fascinate yellow-text">THE DUNGEON</div>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#events" class="text-gray-300 hover:yellow-text transition smooth-scroll font-righteous text-lg">SHOWTIME</a>
                <a href="#location" class="text-gray-300 hover:yellow-text transition smooth-scroll font-righteous text-lg">THE SPOT</a>
                <a href="#about" class="text-gray-300 hover:yellow-text transition smooth-scroll font-righteous text-lg">THE 4-1-1</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-gray-300">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </button>
        </nav>
        <!-- Mobile menu -->
        <div class="hidden md:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#events" class="text-gray-300 hover:bg-orange-800/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">SHOWTIME</a>
                <a href="#location" class="text-gray-300 hover:bg-orange-800/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">THE SPOT</a>
                <a href="#about" class="text-gray-300 hover:bg-orange-800/50 hover:text-white block px-3 py-2 rounded-md text-base font-medium mobile-nav-link smooth-scroll">THE 4-1-1</a>
            </div>
        </div>
    </header>
    
    <!-- Scrolling Shout-Outs Marquee -->
    <div class="marquee">
        <div id="marquee-content" class="marquee-content">
             <span>Wishing you peace, love, and soul!</span>
             <span>Are You Ready!</span>
             <span>Get down at the Player's Ball!</span>
             <span>Scan the QR code!</span>
        </div>
    </div>


    <!-- Main Content -->
    <div class="container mx-auto px-6 py-12">
        <div class="flex flex-col lg:flex-row gap-10">

            <!-- Left Column: Main Info -->
            <main class="w-full lg:w-2/3">
                <!-- Venue Header -->
                <div class="mb-8 fade-in-section">
                    <h1 class="font-fascinate text-8xl md:text-9xl text-white rainbow-title">Player's Ball</h1>
                    <p class="font-righteous text-3xl text-yellow-100/70 mt-2">at Horizon & More</p>
                </div>
                
                <!-- Hero Image -->
                <div class="fade-in-section relative rounded-lg shadow-2xl mb-8 overflow-hidden border-4 border-orange-500/50 h-96">
                     <img src="9701488a-0457-47ee-8abc-d2d6c837176c.jfif" 
                          alt="A stylish couple dressed in 70s luxury attire for the Player's Ball" 
                          class="w-full h-full object-cover object-center"
                          onerror="this.onerror=null;this.src='https://placehold.co/800x384/291d19/facc15?text=Can+You+Dig+It%3F';">
                     <div class="absolute inset-0 bg-gradient-to-t from-brown via-brown/50 to-transparent"></div>
                </div>

                <!-- Upcoming Events Section -->
                <div id="events" class="fade-in-section funky-panel shadow-xl p-8">
                    <h2 class="font-righteous text-5xl font-bold text-white border-b-2 border-orange-500/30 pb-4 mb-6 yellow-text">Showtime!</h2>
                    
                    <div>
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <div class="w-full">
                                <h3 class="font-righteous text-3xl orange-text">Saturday, September 13th, 2025</h3>
                                <p class="text-yellow-100/70 mb-4">Brought to you by The Dungeon</p>
                                
                                <!-- Countdown Timer -->
                                <div id="countdown" class="grid grid-cols-4 gap-4 text-center my-6">
                                    <div><p id="days" class="font-fascinate text-6xl yellow-text">00</p><span class="text-xs text-yellow-200/50">DAYS</span></div>
                                    <div><p id="hours" class="font-fascinate text-6xl yellow-text">00</p><span class="text-xs text-yellow-200/50">HOURS</span></div>
                                    <div><p id="minutes" class="font-fascinate text-6xl yellow-text">00</p><span class="text-xs text-yellow-200/50">MINUTES</span></div>
                                    <div><p id="seconds" class="font-fascinate text-6xl yellow-text">00</p><span class="text-xs text-yellow-200/50">SECONDS</span></div>
                                </div>
                                <div id="live-status" class="hidden text-center my-6">
                                    <p class="font-fascinate text-6xl orange-text animate-pulse">It's Party Time!</p>
                                </div>

                                <div class="flex items-center text-lg space-x-4 mb-4">
                                    <span class="font-bold">8:00 PM - 2:00 AM</span>
                                    <span class="text-orange-800">&bull;</span>
                                    <span class="font-bold orange-text">FREE ENTRY</span>
                                </div>
                                <div class="relative inline-block mt-4">
                                    <button id="calendar-button-toggle" class="btn-primary inline-flex items-center gap-2">
                                        <span id="calendar-button-text">Add to Calendar</span>
                                        <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                    <div id="calendar-dropdown" class="hidden absolute bottom-full mb-2 w-56 funky-panel rounded-lg shadow-xl overflow-hidden z-10">
                                        <ul class="text-center">
                                            <li><a href="#" id="google-cal-link" target="_blank" class="block w-full px-4 py-3 text-sm text-gray-200 hover:bg-orange-800/50 transition duration-150 ease-in-out font-righteous">Google Calendar</a></li>
                                            <li><a href="#" id="ics-cal-link" class="block w-full px-4 py-3 text-sm text-gray-200 hover:bg-orange-800/50 transition duration-150 ease-in-out font-righteous">Apple / .ics</a></li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <hr class="border-orange-500/20 my-8">
                                
                                <h3 class="font-righteous text-3xl text-white mb-4 yellow-text">The Soul Train Lineup</h3>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                    <button class="intel-button funky-panel p-4 rounded-lg text-center hover:border-yellow-400" data-modal="prize-modal">üèÜ<span class="block text-sm mt-2">Best Dressed</span></button>
                                    <button class="intel-button funky-panel p-4 rounded-lg text-center hover:border-yellow-400" data-modal="games-modal">üé≤<span class="block text-sm mt-2">Games</span></button>
                                    <button class="intel-button funky-panel p-4 rounded-lg text-center hover:border-yellow-400" data-modal="lounge-modal">üí®<span class="block text-sm mt-2">Patio Lounge</span></button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Section -->
                <div id="about" class="fade-in-section funky-panel shadow-xl p-8 mt-8">
                     <h2 class="font-righteous text-5xl font-bold text-white border-b-2 border-orange-500/30 pb-4 mb-6 yellow-text">The 4-1-1</h2>
                     <p class="text-gray-200 leading-relaxed text-lg">Wishing you peace, love, and soul! The Player's Ball is the premier social event of the season. An evening dedicated to style, games, and high-class leisure. Featuring a spacious indoor setting, an outdoor patio, full bar service, and ample parking, it's the ideal location to get down!</p>
                </div>

                <!-- Map Section -->
                <div id="location" class="fade-in-section funky-panel shadow-xl mt-8 overflow-hidden">
                     <h2 class="font-righteous text-5xl font-bold text-white p-8 pb-4 yellow-text">The Spot</h2>
                     <p class="px-8 pb-4 text-yellow-100/80 text-lg">2818 NE Interstate 410 Loop, San Antonio, TX 78217</p>
                     <div class="p-8 pt-0">
                        <div class="rounded-lg overflow-hidden border-2 border-orange-500/30 h-96">
                            <iframe id="google-map-embed" class="w-full h-full"
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3472.775815324545!2d-98.42050402465719!3d29.492211442118324!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x865c6062f4434255%3A0x6731a542159cf058!2s2818%20NE%20Interstate%20410%20Loop%2C%20San%20Antonio%2C%20TX%2078217!5e0!3m2!1sen!2sus!4v1725333105745!5m2!1sen!2sus"
                                style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                             <a id="uber-link" href="https://m.uber.com/ul/?action=setPickup&dropoff[latitude]=29.492211&dropoff[longitude]=-98.420504&dropoff[formatted_address]=2818%20NE%20Interstate%20410%20Loop%2C%20San%20Antonio%2C%20TX%2078217" target="_blank" class="btn-primary text-center">
                                Call an Uber
                             </a>
                             <a id="lyft-link" href="https://lyft.com/ride?id=lyft&destination[latitude]=29.492211&destination[longitude]=-98.420504" target="_blank" class="btn-primary text-center bg-pink-600 hover:bg-pink-500">
                                Call a Lyft
                             </a>
                        </div>
                     </div>
                </div>
            </main>

            <!-- Right Column: Sidebar -->
            <aside class="w-full lg:w-1/3 fade-in-section">
                <div class="funky-panel shadow-xl p-6 sticky top-28">
                     <button id="rsvp-button" class="btn-primary w-full mb-6">
                        Get on the List
                     </button>
                     
                     <button id="song-request-button" class="btn-primary w-full mb-6 bg-purple-700 hover:bg-purple-600">
                        Hit the Request Line
                     </button>

                     <h2 class="font-righteous text-2xl font-bold text-white pb-4 yellow-text">The Party Line</h2>
                     <div class="space-y-3 text-lg font-bold text-yellow-100/80">
                        <div class="flex justify-between items-center"><span>Vibes</span><span class="text-green-400">Righteous</span></div>
                        <div class="flex justify-between items-center"><span>Music</span><span class="text-green-400">Soulful</span></div>
                        <div class="flex justify-between items-center"><span>Dancers</span><span id="guest-count" class="text-green-400">137</span></div>
                     </div>
                     
                     <hr class="border-orange-500/20 my-6">

                     <h2 class="font-righteous text-2xl font-bold text-white pb-4 yellow-text">Top Requests</h2>
                     <ul id="top-requests-list" class="space-y-2 text-yellow-100/80">
                        <li><span class="font-bold">1.</span> <span class="italic">Waiting for requests...</span></li>
                        <li><span class="font-bold">2.</span> <span class="italic">...</span></li>
                        <li><span class="font-bold">3.</span> <span class="italic">...</span></li>
                     </ul>

                     <hr class="border-orange-500/20 my-6">

                     <h2 class="font-righteous text-2xl font-bold text-white pb-4 yellow-text">Get Connected</h2>
                     <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:yellow-text transition"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.28C8.28,9.09 5.11,7.38 2.9,4.79C2.53,5.42 2.33,6.15 2.33,6.94C2.33,8.43 3.11,9.75 4.26,10.54C3.54,10.52 2.87,10.31 2.29,10.03V10.08C2.29,12.09 3.71,13.78 5.6,14.17C5.25,14.26 4.87,14.31 4.49,14.31C4.21,14.31 3.94,14.28 3.68,14.23C4.22,15.89 5.82,17.06 7.69,17.1C6.27,18.23 4.4,18.87 2.38,18.87C2.03,18.87 1.69,18.85 1.36,18.81C3.25,20.04 5.5,20.8 8,20.8C16,20.8 20.25,14.18 20.25,8.78C20.25,8.58 20.25,8.39 20.24,8.19C21.1,7.57 21.86,6.84 22.46,6Z"></path></svg></a>
                        <a href="#" class="text-gray-400 hover:yellow-text transition"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"></path></svg></a>
                     </div>
                </div>
            </aside>
        </div>
    </div>

    <!-- Modals -->
    <div id="rsvp-modal" class="modal-overlay">
        <div class="modal-content funky-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4">
            <h2 class="font-righteous text-3xl yellow-text mb-4">Get on the List</h2>
            <p class="text-gray-200 mb-6">Enter your name & email to confirm your attendance.</p>
            <form id="rsvp-form">
                <input type="text" id="alias-input" placeholder="Your Name..." class="w-full bg-orange-900/20 border-2 border-orange-500/50 rounded-full px-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-400 focus:outline-none mb-4">
                <input type="email" id="email-input" placeholder="Your Email..." class="w-full bg-orange-900/20 border-2 border-orange-500/50 rounded-full px-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-400 focus:outline-none">
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" class="close-modal-button text-gray-300 hover:text-white font-bold">Cancel</button>
                    <button type="submit" class="btn-primary">Confirm</button>
                </div>
            </form>
            <div id="rsvp-success" class="hidden text-center">
                <h3 class="font-righteous text-3xl text-green-400">You're In!</h3>
                <p class="text-gray-200 mt-2">Your spot is saved. A confirmation email has been sent (simulation).</p>
                <button type="button" class="close-modal-button mt-6 btn-primary">Right On</button>
            </div>
        </div>
    </div>
    <div id="song-request-modal" class="modal-overlay">
        <div class="modal-content funky-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4">
            <h2 class="font-righteous text-3xl yellow-text mb-4 flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V4a1 1 0 00-1-1z" /></svg>
                Hit the Request Line
            </h2>
            <p class="text-gray-200 mb-6">Got a song you wanna hear? Let the DJ know!</p>
            <form id="song-request-form">
                <input type="text" id="song-input" placeholder="Song Title..." class="w-full bg-orange-900/20 border-2 border-orange-500/50 rounded-full px-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-400 focus:outline-none">
                 <input type="text" id="artist-input" placeholder="Artist..." class="w-full bg-orange-900/20 border-2 border-orange-500/50 rounded-full px-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-yellow-400 focus:outline-none mt-4">
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" class="close-modal-button text-gray-300 hover:text-white font-bold">Cancel</button>
                    <button type="submit" class="btn-primary">Send Request</button>
                </div>
            </form>
            <div id="song-request-success" class="hidden text-center">
                <h3 id="song-request-feedback" class="font-righteous text-3xl text-green-400">Request Sent!</h3>
                <p class="text-gray-200 mt-2">The DJ has your request. Check the shout-outs!</p>
                <button type="button" class="close-modal-button mt-6 btn-primary">Dynamite!</button>
            </div>
        </div>
    </div>
    <div id="prize-modal" class="modal-overlay">
         <div class="modal-content funky-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-righteous text-3xl yellow-text mb-4">Best Dressed</h2>
            <p class="text-gray-200 text-lg">Break out your finest threads! A grand prize and eternal bragging rights await the most stylish player of the evening.</p>
            <button class="close-modal-button mt-6 btn-primary">Far Out</button>
        </div>
    </div>
    <div id="games-modal" class="modal-overlay">
         <div class="modal-content funky-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-righteous text-3xl yellow-text mb-4">Games</h2>
            <p class="text-gray-200 text-lg">Get your game on! Join a round of "Bih Better Have My Money," or test your skills in classic games of Spades & Dominoes. It's gonna be a stone cold trip!</p>
            <button class="close-modal-button mt-6 btn-primary">Groovy</button>
        </div>
    </div>
     <div id="lounge-modal" class="modal-overlay">
         <div class="modal-content funky-panel rounded-lg shadow-xl p-8 w-full max-w-md m-4 text-center">
            <h2 class="font-righteous text-3xl yellow-text mb-4">Patio Lounge</h2>
            <p class="text-gray-200 text-lg">Chill out on the patio. Enjoy fine cigars and network with fellow players in a relaxed atmosphere. What a scene!</p>
            <button class="close-modal-button mt-6 btn-primary">Outta Sight</button>
        </div>
    </div>
    <div id="music-modal" class="modal-overlay">
        <div class="modal-content funky-panel rounded-lg shadow-xl p-4 w-full max-w-lg m-4">
            <div class="video-container">
                <div id="youtube-player"></div>
            </div>
             <button class="close-modal-button mt-4 btn-primary w-full">Close Player</button>
        </div>
    </div>


    <!-- Footer -->
    <footer class="header-bg mt-12">
        <div class="container mx-auto px-6 py-4 text-center text-yellow-200/50 text-sm flex justify-between items-center">
            <p>&copy; 2025 The Dungeon Presents. All Rights Reserved. Powered by PressCreates</p>
            <div id="music-player" class="flex items-center gap-3">
                <span class="font-righteous text-lg">Player's Playlist:</span>
                <button id="playlist-button" class="bg-orange-500 rounded-full h-10 w-10 flex items-center justify-center border-2 border-black shadow-md">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V4a1 1 0 00-1-1z" /></svg>
                </button>
            </div>
        </div>
    </footer>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- YouTube Player Logic ---
            let player;
            let playerReady = false;
            window.onYouTubeIframeAPIReady = function() {
                player = new YT.Player('youtube-player', {
                    height: '100%',
                    width: '100%',
                    playerVars: {
                        'playsinline': 1,
                        'listType': 'playlist',
                        'list': 'PL8F6A37F55855057A' // A "Best of Soul Train" playlist
                    },
                    events: {
                        'onReady': () => { playerReady = true; }
                    }
                });
            };
            
            // --- Geolocation for Ride Sharing ---
            navigator.geolocation.getCurrentPosition(position => {
                const { latitude, longitude } = position.coords;
                const uberLink = document.getElementById('uber-link');
                const lyftLink = document.getElementById('lyft-link');

                uberLink.href = `https://m.uber.com/ul/?action=setPickup&pickup[latitude]=${latitude}&pickup[longitude]=${longitude}&dropoff[latitude]=29.492211&dropoff[longitude]=-98.420504&dropoff[formatted_address]=2818%20NE%20Interstate%20410%20Loop%2C%20San%20Antonio%2C%20TX%2078217`;
                lyftLink.href = `https://lyft.com/ride?id=lyft&pickup[latitude]=${latitude}&pickup[longitude]=${longitude}&destination[latitude]=29.492211&destination[longitude]=-98.420504`;

            }, () => {
                console.log("Geolocation permission denied. Ride-sharing links will use default behavior.");
            });


            // Smooth Scroll Logic
            document.querySelectorAll('a.smooth-scroll').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (mobileMenu) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // Countdown Timer Logic
            const countdownElement = document.getElementById('countdown');
            const liveStatusElement = document.getElementById('live-status');
            const eventDate = new Date('September 13, 2025 20:00:00').getTime();

            const countdownInterval = setInterval(() => {
                const now = new Date().getTime();
                const timeLeft = eventDate - now;

                if (timeLeft < 0) {
                    clearInterval(countdownInterval);
                    if (countdownElement) countdownElement.classList.add('hidden');
                    if (liveStatusElement) liveStatusElement.classList.remove('hidden');
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = String(days).padStart(2, '0');
                document.getElementById('hours').innerText = String(hours).padStart(2, '0');
                document.getElementById('minutes').innerText = String(minutes).padStart(2, '0');
                document.getElementById('seconds').innerText = String(seconds).padStart(2, '0');
            }, 1000);
            
            // Add to Calendar Logic
            const calendarToggle = document.getElementById('calendar-button-toggle');
            const calendarDropdown = document.getElementById('calendar-dropdown');
            const calendarButtonText = document.getElementById('calendar-button-text');

            const eventDetails = {
                title: "Player‚Äôs Ball",
                location: "Horizons & More - 2818 NE Interstate 410 Loop, San Antonio, TX 78217",
                description: "The Dungeon Presents: Player‚Äôs Ball. An evening dedicated to style, games, and high-class leisure.",
                startTimeUTC: "20250914T010000Z",
                endTimeUTC: "20250914T070000Z"
            };

            const googleLink = `https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventDetails.title)}&dates=${eventDetails.startTimeUTC}/${eventDetails.endTimeUTC}&details=${encodeURIComponent(eventDetails.description)}&location=${encodeURIComponent(eventDetails.location)}`;
            document.getElementById('google-cal-link').href = googleLink;

            document.getElementById('ics-cal-link').addEventListener('click', (e) => {
                e.preventDefault();
                const icsContent = ["BEGIN:VCALENDAR", "VERSION:2.0", "BEGIN:VEVENT", `URL:${document.URL}`, `DTSTART:${eventDetails.startTimeUTC}`, `DTEND:${eventDetails.endTimeUTC}`, `SUMMARY:${eventDetails.title}`, `DESCRIPTION:${eventDetails.description}`, `LOCATION:${eventDetails.location}`, "END:VEVENT", "END:VCALENDAR"].join("\n");
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'players-ball-event.ics';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            if (calendarToggle && calendarDropdown) {
                 calendarToggle.addEventListener('click', (e) => {
                    e.stopPropagation();
                    calendarDropdown.classList.toggle('hidden');
                 });

                document.querySelectorAll('#calendar-dropdown a').forEach(link => {
                    link.addEventListener('click', () => {
                        calendarDropdown.classList.add('hidden');
                        calendarButtonText.innerText = "Right On!";
                        calendarToggle.style.backgroundColor = 'var(--yellow)';

                        setTimeout(() => {
                           calendarButtonText.innerText = "Add to Calendar";
                           calendarToggle.style.backgroundColor = 'var(--orange)';
                        }, 2500);
                    });
                });
                
                window.addEventListener('click', (e) => {
                    if(!calendarDropdown.classList.contains('hidden') && !calendarToggle.contains(e.target)) {
                        calendarDropdown.classList.add('hidden');
                    }
                });
            }

            // Scroll Animation Logic
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('is-visible'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.fade-in-section').forEach(section => observer.observe(section));

            // Modal Logic
            const rsvpButton = document.getElementById('rsvp-button');
            const rsvpModal = document.getElementById('rsvp-modal');
            const rsvpForm = document.getElementById('rsvp-form');
            const rsvpSuccess = document.getElementById('rsvp-success');
            const guestCountEl = document.getElementById('guest-count');
            const marqueeContent = document.getElementById('marquee-content');
            let guestCount = 137;

            const songRequestButton = document.getElementById('song-request-button');
            const songRequestModal = document.getElementById('song-request-modal');
            const songRequestForm = document.getElementById('song-request-form');
            const songRequestSuccess = document.getElementById('song-request-success');
            const songRequestFeedback = document.getElementById('song-request-feedback');
            
            const playlistButton = document.getElementById('playlist-button');
            const musicModal = document.getElementById('music-modal');

            const openModal = (modal) => {
                modal.classList.add('active');
                if (modal.id === 'music-modal' && playerReady && typeof player.playVideo === 'function') {
                    player.playVideo();
                }
            };
            const closeModal = (modal) => {
                if (modal.id === 'music-modal' && playerReady && typeof player.pauseVideo === 'function') {
                    player.pauseVideo();
                }
                modal.classList.remove('active');
            };

            if(rsvpButton) rsvpButton.addEventListener('click', () => openModal(rsvpModal));
            if(songRequestButton) songRequestButton.addEventListener('click', () => openModal(songRequestModal));
            if(playlistButton) playlistButton.addEventListener('click', () => openModal(musicModal));
            
            if(rsvpForm) rsvpForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const aliasInput = document.getElementById('alias-input');
                const emailInput = document.getElementById('email-input');
                const newAlias = aliasInput.value;

                if (newAlias.trim() !== '') {
                    const newShoutout = document.createElement('span');
                    newShoutout.textContent = `Shout out to ${newAlias}!`;
                    marqueeContent.appendChild(newShoutout);
                }
                
                // Simulate sending email
                console.log(`// SIMULATING EMAIL: Sending confirmation to ${emailInput.value}`);

                rsvpForm.classList.add('hidden');
                rsvpSuccess.classList.remove('hidden');
                guestCount++;
                guestCountEl.textContent = guestCount;
            });

            // --- Enhanced Song Request Logic ---
            const songRequests = {};
            const topRequestsList = document.getElementById('top-requests-list');

            function updateTopRequests() {
                const sortedRequests = Object.entries(songRequests).sort(([,a],[,b]) => b-a);
                topRequestsList.innerHTML = '';
                for(let i=0; i< Math.min(sortedRequests.length, 3); i++) {
                    const [song, count] = sortedRequests[i];
                    const li = document.createElement('li');
                    li.innerHTML = `<span class="font-bold">${i+1}.</span> ${song} <span class="text-xs text-yellow-400/50">(${count} requests)</span>`;
                    topRequestsList.appendChild(li);
                }
                 if(sortedRequests.length === 0) {
                     const li = document.createElement('li');
                     li.innerHTML = `<span class="italic">Waiting for requests...</span>`;
                     topRequestsList.appendChild(li);
                 }
            }
            updateTopRequests(); // initial call

            if(songRequestForm) songRequestForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const songInput = document.getElementById('song-input');
                const artistInput = document.getElementById('artist-input');
                const newSong = songInput.value.trim();
                const newArtist = artistInput.value.trim();
                const feedbackText = document.getElementById('song-request-feedback');

                if (newSong !== '' && newArtist !== '') {
                    const fullRequest = `"${newSong}" by ${newArtist}`;
                    songRequests[fullRequest] = (songRequests[fullRequest] || 0) + 1;
                    updateTopRequests();
                    
                    const newShoutout = document.createElement('span');
                    newShoutout.textContent = `DJ, play ${fullRequest}!`;
                    marqueeContent.appendChild(newShoutout);

                    feedbackText.innerHTML = "Request Sent!";
                } else {
                     feedbackText.innerHTML = "Gotta fill it all out!";
                }

                songRequestForm.classList.add('hidden');
                songRequestSuccess.classList.remove('hidden');
            });
            
            document.querySelectorAll('.close-modal-button').forEach(btn => {
                btn.addEventListener('click', () => {
                    const modal = btn.closest('.modal-overlay');
                    closeModal(modal);
                    setTimeout(() => {
                        if(modal.id === 'rsvp-modal') {
                           if(rsvpForm) rsvpForm.classList.remove('hidden');
                           if(rsvpSuccess) rsvpSuccess.classList.add('hidden');
                           const aliasInput = document.getElementById('alias-input');
                           if(aliasInput) aliasInput.value = '';
                           const emailInput = document.getElementById('email-input');
                           if(emailInput) emailInput.value = '';
                        }
                        if(modal.id === 'song-request-modal') {
                            if(songRequestForm) songRequestForm.classList.remove('hidden');
                            if(songRequestSuccess) songRequestSuccess.classList.add('hidden');
                            const songInput = document.getElementById('song-input');
                            const artistInput = document.getElementById('artist-input');
                            if(songInput) songInput.value = '';
                            if(artistInput) artistInput.value = '';
                        }
                    }, 300);
                });
            });

            document.querySelectorAll('.intel-button').forEach(btn => {
                btn.addEventListener('click', () => {
                    const modalId = btn.dataset.modal;
                    const modal = document.getElementById(modalId);
                    if(modal) openModal(modal);
                });
            });

            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                     if(e.target === modal) {
                        closeModal(modal);
                     }
                });
            });
            
            // Dynamic Light Background Logic
            const bg = document.getElementById('luxury-animated-background');
            const lights = [];
            const colors = ['#f97316', '#facc15', '#ef4444'];
            const numLights = 10;

            for (let i = 0; i < numLights; i++) {
                const light = document.createElement('div');
                light.classList.add('light');
                const size = Math.random() * 200 + 100; // size between 100px and 300px
                light.style.width = `${size}px`;
                light.style.height = `${size}px`;
                light.style.background = `radial-gradient(circle, ${colors[i % colors.length]} 10%, transparent 70%)`;
                light.style.top = `${Math.random() * 100}%`;
                light.style.left = `${Math.random() * 100}%`;
                light.dataset.speed = Math.random() * 0.5 + 0.2;
                bg.appendChild(light);
                lights.push(light);
            }

            window.addEventListener('mousemove', (e) => {
                const { clientX, clientY } = e;
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;

                lights.forEach(light => {
                    const speed = light.dataset.speed;
                    const moveX = (clientX - centerX) * speed / 20;
                    const moveY = (clientY - centerY) * speed / 20;
                    light.style.transform = `translate(${moveX}px, ${moveY}px)`;
                });
            });

        });
    </script>
</body>
</html>

